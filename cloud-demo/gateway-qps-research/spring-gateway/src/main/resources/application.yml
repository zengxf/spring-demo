server:
  port: 9661

spring:
  application:
    name: gateway-service
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
        group: DEFAULT_GROUP
    gateway:
      discovery:
        locator:
          enabled: true                 # ğŸ”¥ å…è®¸ä»æ³¨å†Œä¸­å¿ƒå‘ç°æœåŠ¡
          lower-case-service-id: true   # ğŸ”¥ è‡ªåŠ¨å°†æœåŠ¡åè½¬æ¢ä¸ºå°å†™ï¼ˆURL ä¸­æ›´æ–¹ä¾¿ï¼‰
      default-filters: # ä¸ºæ‰€æœ‰è·¯ç”±ï¼ˆåŒ…æ‹¬è‡ªåŠ¨ç”Ÿæˆçš„ï¼‰æ·»åŠ é»˜è®¤è¿‡æ»¤å™¨
        - StripPrefix=1
      routes:
        - id: baidu_route
          uri: https://www.baidu.com # è½¬å‘çš„ç›®æ ‡åœ°å€
          predicates:
            - Path=/baidu, /baidu/**
          filters:
            - AddRequestParameter=wd, test # (å¯é€‰) å¼ºåˆ¶åŠ ä¸ŠæŸ¥è¯¢å‚æ•° wd=test
    loadbalancer:
      retry:
        enabled: true
        max-retries-on-same-service-instance: 1 # å…è®¸åœ¨åŒä¸€å®ä¾‹ä¸Šé‡è¯•çš„æ¬¡æ•°
        max-retries-on-next-service-instance: 2 # å…è®¸åˆ‡æ¢åˆ°å…¶ä»–å®ä¾‹é‡è¯•çš„æ¬¡æ•°
        retry-on-all-operations: true # å³ä½¿æ˜¯ POST è¯·æ±‚ä¹Ÿé‡è¯•ï¼ˆé»˜è®¤ false åªé‡è¯• GETï¼Œå› ä¸º POST ä¸æ˜¯å¹‚ç­‰çš„ï¼Œé‡è¯•å¯èƒ½å¯¼è‡´æ•°æ®é‡å¤æäº¤ï¼‰
        retryable-status-codes: 500, 503, 504 # å“ªäº›çŠ¶æ€ç è§¦å‘é‡è¯•
logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    org.springframework.cloud.loadbalancer: DEBUG